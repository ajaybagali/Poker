@model Poker.Models.Game

@{
    ViewData["Title"] = "Game";
}

<p class="gameid">@Model.ID</p>
<body style="overflow-x:hidden; overflow-y:hidden">
    <div class="game_background" id="game_background"></div>
</body>


@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/5.1.5/pixi.js"></script>
    <script src="https://pixijs.io/pixi-sound/dist/pixi-sound.js"></script>
    <script type="text/javascript" src="~/js/game.js"></script>
    <script type="text/javascript" src="~/js/button.js"></script>
    <script type="text/javascript" src="~/js/setup.js"></script>
    <script type="text/javascript" src="~/js/game_board.js"></script>

    <script type="text/javascript">


        var game = new Game();
        game.main();

        function worker() {
            data = { id: @Model.ID };
            $.post('/Games/Data', data)
                .done(function (result) {
                    //new game
                    if (result.turn != -1) {
                        game.draw_players(result.players);
                        game.draw_pot(result.pot);

                    }

                    setTimeout(worker, 3000);
                });
        }

        window.onload = function () {
            setTimeout(worker, 3000);
        };


    </script>
}

